{"version":3,"file":"Menu.stories-16c400e1.js","sources":["../../src/components/Menu/Menu.tsx","../../src/components/Menu/MenuItem.tsx","../../src/components/Menu/SubMenu.tsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\nimport { classNames } from '../../utils';\nimport { MenuItemProps } from './MenuItem';\n\nexport type SelectCallback = (selectIndex: string) => void;\n\ninterface IMenuContext {\n\tindex: string;\n\tmode?: MenuMode;\n\tdefaultOpenSubMenu?: string[];\n\tonSelect?: SelectCallback;\n}\n\nexport const MenuContext = createContext<IMenuContext>({ index: '0' });\n\ntype MenuMode = 'horizontal' | 'vertical';\n\nexport interface MenuProps {\n\tdefaultIndex?: string;\n\tclassName?: string;\n\tmode?: MenuMode;\n\tstyle?: React.CSSProperties;\n\tchildren?: React.ReactNode;\n\tdefaultOpenSubMenu?: string[];\n\tonSelect?: SelectCallback;\n}\n\nconst Menu: React.FC<MenuProps> = ({\n\tmode,\n\tdefaultIndex,\n\tclassName,\n\tstyle,\n\tchildren,\n\tdefaultOpenSubMenu,\n\tonSelect\n}) => {\n\tconst [currentActive, setActive] = useState(defaultIndex);\n\tconst classes = classNames('menu', className, [\n\t\tmode === 'vertical' ? 'menu-vertical' : 'menu-horizontal'\n\t]);\n\tconst handleClick = (index: string) => {\n\t\tsetActive(index);\n\t\tif (typeof onSelect === 'function') onSelect(index);\n\t};\n\tconst menuContext: IMenuContext = {\n\t\tindex: currentActive ?? '0',\n\t\tmode,\n\t\tdefaultOpenSubMenu,\n\t\tonSelect: handleClick\n\t};\n\n\tconst renderChildren = () => {\n\t\treturn React.Children.map(children, (child, index) => {\n\t\t\tconst el = child as React.FunctionComponentElement<MenuItemProps>;\n\t\t\tconst passedName = ['MenuItem', 'SubMenu'];\n\n\t\t\tif (passedName.includes(el.type.displayName || '')) {\n\t\t\t\treturn React.cloneElement(el, { index: index.toString() });\n\t\t\t} else {\n\t\t\t\tconsole.error(\n\t\t\t\t\t'Warning: Menu has a child which is not a MenuItem component.'\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (\n\t\t<ul className={classes} style={style} data-testid=\"test-menu\">\n\t\t\t<MenuContext.Provider value={menuContext}>\n\t\t\t\t{renderChildren()}\n\t\t\t</MenuContext.Provider>\n\t\t</ul>\n\t);\n};\n\nMenu.defaultProps = {\n\tdefaultIndex: '0',\n\tmode: 'horizontal',\n\tdefaultOpenSubMenu: []\n};\n\nexport default Menu;\n","import React, { useContext } from 'react';\nimport { classNames } from '../../utils';\nimport { MenuContext, SelectCallback } from './Menu';\n\nexport interface MenuItemProps {\n\tindex?: string;\n\tdisabled?: boolean;\n\tclassName?: string;\n\tstyle?: React.CSSProperties;\n\tchildren?: React.ReactNode;\n\tonSelect?: SelectCallback;\n}\n\nconst MenuItem: React.FC<MenuItemProps> = ({\n\tindex,\n\tdisabled,\n\tclassName,\n\tstyle,\n\tchildren\n}) => {\n\tconst context = useContext(MenuContext);\n\tconst classes = classNames('menu-item', className, {\n\t\tdisabled,\n\t\tactive: context.index === index\n\t});\n\tconst handleClick = () => {\n\t\tif (context.onSelect && !disabled && typeof index === 'string') {\n\t\t\tcontext.onSelect(index);\n\t\t}\n\t};\n\treturn (\n\t\t<li className={classes} style={style} onClick={handleClick}>\n\t\t\t{children}\n\t\t</li>\n\t);\n};\n\nMenuItem.displayName = 'MenuItem';\n\nexport default MenuItem;\n","import React, { useState, useContext, useRef } from 'react';\nimport { classNames } from '../../utils';\nimport { MenuContext } from './Menu';\nimport { MenuItemProps } from './MenuItem';\nimport Transition from '../Transition';\nimport Icon from '../Icon';\n\nexport interface SubMenuProps {\n\tindex?: string;\n\ttitle: string;\n\tclassName?: string;\n\tchildren?: React.ReactNode;\n}\n\nconst SubMenu: React.FC<SubMenuProps> = ({\n\tindex,\n\ttitle,\n\tclassName,\n\tchildren\n}) => {\n\tconst context = useContext(MenuContext);\n\tconst isOpen =\n\t\tcontext.mode === 'vertical' &&\n\t\t!!context.defaultOpenSubMenu?.includes(index || '');\n\tconst [subMenuOpen, setSubMenuOpen] = useState(isOpen);\n\tconst classes = classNames('menu-item sub-menu-item', className, {\n\t\tactive: context.index === index,\n\t\topened: subMenuOpen\n\t});\n\tconst nodeRef = useRef(null);\n\n\tconst handleClick = (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\tsetSubMenuOpen(!subMenuOpen);\n\t};\n\tconst handleMouse = (e: React.MouseEvent, toggle: boolean) => {\n\t\te.preventDefault();\n\t\tsetSubMenuOpen(toggle);\n\t};\n\n\tconst clickEvent =\n\t\tcontext.mode === 'vertical'\n\t\t\t? {\n\t\t\t\t\tonClick: handleClick\n\t\t\t  }\n\t\t\t: {};\n\tconst mouseEvent =\n\t\tcontext.mode !== 'vertical'\n\t\t\t? {\n\t\t\t\t\tonMouseEnter: (e: React.MouseEvent) => handleMouse(e, true),\n\t\t\t\t\tonMouseLeave: (e: React.MouseEvent) => handleMouse(e, false)\n\t\t\t  }\n\t\t\t: {};\n\n\tconst renderChildren = () => {\n\t\tconst childrenEl = React.Children.map(children, (child, i) => {\n\t\t\tconst el = child as React.FunctionComponentElement<MenuItemProps>;\n\n\t\t\tif (el.type.displayName === 'MenuItem') {\n\t\t\t\treturn React.cloneElement(el, {\n\t\t\t\t\tindex: `${index}-${i}`\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.error(\n\t\t\t\t\t'Warning: SubMenu has a child which is not a MenuItem component.'\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\treturn (\n\t\t\t<Transition\n\t\t\t\tnodeRef={nodeRef}\n\t\t\t\tin={subMenuOpen}\n\t\t\t\ttimeout={300}\n\t\t\t\tanimationName=\"zoom-in-top\"\n\t\t\t>\n\t\t\t\t<ul ref={nodeRef} className=\"sub-menu\">\n\t\t\t\t\t{childrenEl}\n\t\t\t\t</ul>\n\t\t\t</Transition>\n\t\t);\n\t};\n\n\treturn (\n\t\t<li className={classes} {...mouseEvent}>\n\t\t\t<div className=\"sub-menu-title\" {...clickEvent}>\n\t\t\t\t{title}\n\t\t\t\t<Icon\n\t\t\t\t\ticon=\"FaAngleDown\"\n\t\t\t\t\tclassName=\"sub-menu-title-arrow-icon\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{renderChildren()}\n\t\t</li>\n\t);\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["MenuContext","createContext","Menu","__name","mode","defaultIndex","className","style","children","defaultOpenSubMenu","currentActive","setActive","useState","classes","classNames","menuContext","index","onSelect","handleClick","renderChildren","React","child","el","console","_jsx","Menu$1","MenuItem","disabled","context","useContext","SubMenu","title","isOpen","_a","subMenuOpen","setSubMenuOpen","nodeRef","useRef","e","handleMouse","toggle","clickEvent","mouseEvent","childrenEl","i","Transition","_jsxs"],"mappings":"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"}